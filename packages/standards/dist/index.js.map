{"version":3,"file":"index.js","sources":["../src/eip1193/types.ts","../src/eip1193/provider.ts","../src/eip6963/announcer.ts","../src/eip6963/discovery.ts","../src/solana-wallet-standard/types.ts","../src/solana-wallet-standard/wallet.ts"],"sourcesContent":["/**\n * EIP-1193 Ethereum Provider Types\n * https://eips.ethereum.org/EIPS/eip-1193\n */\n\n/**\n * Provider request method signature\n */\nexport interface ProviderRequest {\n  method: string;\n  params?: unknown[] | Record<string, unknown>;\n}\n\n/**\n * Provider RPC error as per EIP-1193\n */\nexport interface ProviderRpcError extends Error {\n  code: number;\n  data?: unknown;\n}\n\n/**\n * Provider events as per EIP-1193\n */\nexport interface ProviderEvents {\n  /** Chain changed event */\n  chainChanged: (chainId: string) => void;\n  /** Accounts changed event */\n  accountsChanged: (accounts: string[]) => void;\n  /** Connect event */\n  connect: (connectInfo: { chainId: string }) => void;\n  /** Disconnect event */\n  disconnect: (error: ProviderRpcError) => void;\n  /** Message event for subscription results */\n  message: (message: { type: string; data: unknown }) => void;\n  /** Index signature for compatibility */\n  [key: string]: (...args: any[]) => void;\n}\n\n/**\n * EIP-1193 Ethereum Provider interface\n */\nexport interface EthereumProvider {\n  /**\n   * Makes an RPC request to the Ethereum node\n   */\n  request(args: ProviderRequest): Promise<unknown>;\n\n  /**\n   * Adds an event listener\n   */\n  on<T extends keyof ProviderEvents>(event: T, listener: ProviderEvents[T]): void;\n\n  /**\n   * Removes an event listener\n   */\n  removeListener<T extends keyof ProviderEvents>(event: T, listener: ProviderEvents[T]): void;\n\n  /**\n   * Removes all listeners for an event\n   */\n  removeAllListeners?(event?: keyof ProviderEvents): void;\n\n  /**\n   * Provider identification\n   */\n  readonly isMetaMask?: boolean;\n  readonly isConnected?: () => boolean;\n  readonly networkVersion?: string;\n  readonly chainId?: string;\n  readonly selectedAddress?: string | null;\n}\n\n/**\n * Common Ethereum RPC methods\n */\nexport enum EthereumMethod {\n  // Account management\n  ETH_REQUEST_ACCOUNTS = 'eth_requestAccounts',\n  ETH_ACCOUNTS = 'eth_accounts',\n\n  // Chain information\n  ETH_CHAIN_ID = 'eth_chainId',\n  NET_VERSION = 'net_version',\n\n  // Signing\n  PERSONAL_SIGN = 'personal_sign',\n  ETH_SIGN = 'eth_sign',\n  ETH_SIGN_TYPED_DATA = 'eth_signTypedData',\n  ETH_SIGN_TYPED_DATA_V3 = 'eth_signTypedData_v3',\n  ETH_SIGN_TYPED_DATA_V4 = 'eth_signTypedData_v4',\n\n  // Transactions\n  ETH_SEND_TRANSACTION = 'eth_sendTransaction',\n  ETH_SEND_RAW_TRANSACTION = 'eth_sendRawTransaction',\n\n  // Chain management\n  WALLET_SWITCH_ETHEREUM_CHAIN = 'wallet_switchEthereumChain',\n  WALLET_ADD_ETHEREUM_CHAIN = 'wallet_addEthereumChain',\n\n  // Permissions\n  WALLET_REQUEST_PERMISSIONS = 'wallet_requestPermissions',\n  WALLET_GET_PERMISSIONS = 'wallet_getPermissions',\n\n  // Watch assets\n  WALLET_WATCH_ASSET = 'wallet_watchAsset'\n}\n\n/**\n * Error codes as per EIP-1193\n */\nexport enum ProviderErrorCode {\n  // Standard JSON-RPC 2.0 errors\n  PARSE_ERROR = -32700,\n  INVALID_REQUEST = -32600,\n  METHOD_NOT_FOUND = -32601,\n  INVALID_PARAMS = -32602,\n  INTERNAL_ERROR = -32603,\n\n  // EIP-1193 specific errors\n  USER_REJECTED_REQUEST = 4001,\n  UNAUTHORIZED = 4100,\n  UNSUPPORTED_METHOD = 4200,\n  DISCONNECTED = 4900,\n  CHAIN_DISCONNECTED = 4901,\n\n  // Common wallet errors\n  UNSUPPORTED_CHAIN = 4902,\n  RESOURCE_UNAVAILABLE = -32002,\n  RESOURCE_NOT_FOUND = -32001,\n  TRANSACTION_REJECTED = -32003\n}\n\n/**\n * Transaction object for eth_sendTransaction\n */\nexport interface TransactionObject {\n  from: string;\n  to?: string;\n  value?: string;\n  gas?: string;\n  gasPrice?: string;\n  maxFeePerGas?: string;\n  maxPriorityFeePerGas?: string;\n  data?: string;\n  nonce?: string;\n  type?: string;\n}\n\n/**\n * Chain configuration for wallet_addEthereumChain\n */\nexport interface AddEthereumChainParameter {\n  chainId: string;\n  chainName: string;\n  nativeCurrency: {\n    name: string;\n    symbol: string;\n    decimals: number;\n  };\n  rpcUrls: string[];\n  blockExplorerUrls?: string[];\n  iconUrls?: string[];\n}\n\n/**\n * Switch chain parameter for wallet_switchEthereumChain\n */\nexport interface SwitchEthereumChainParameter {\n  chainId: string;\n}\n\n/**\n * Asset to watch for wallet_watchAsset\n */\nexport interface WatchAssetParameter {\n  type: 'ERC20';\n  options: {\n    address: string;\n    symbol: string;\n    decimals: number;\n    image?: string;\n  };\n}\n\n/**\n * Permission object\n */\nexport interface PermissionObject {\n  invoker: string;\n  parentCapability: string;\n  id: string;\n  date: number;\n  caveats?: Array<{\n    type: string;\n    value: unknown;\n  }>;\n}","import { EventEmitter } from '@arenaentertainment/wallet-mock-shared';\nimport {\n  EthereumProvider,\n  ProviderRequest,\n  ProviderRpcError,\n  ProviderEvents,\n  EthereumMethod,\n  ProviderErrorCode,\n  TransactionObject,\n  AddEthereumChainParameter,\n  SwitchEthereumChainParameter,\n  WatchAssetParameter,\n  PermissionObject\n} from './types.js';\nimport { logger } from '@arenaentertainment/wallet-mock-shared';\n\n/**\n * EIP-1193 compliant Ethereum provider implementation\n */\nexport class MockEthereumProvider implements EthereumProvider, EventEmitter<ProviderEvents> {\n  private eventListeners: Partial<Record<keyof ProviderEvents, Set<Function>>> = {};\n  private _chainId: string;\n  private _accounts: string[] = [];\n  private _isConnected: boolean = false;\n  private _networkVersion: string;\n\n  // Provider identification\n  readonly isMetaMask = false; // Set to true if mimicking MetaMask\n  readonly isMockWallet = true;\n\n  constructor(initialChainId: string = '0x1') {\n    this._chainId = initialChainId;\n    this._networkVersion = parseInt(initialChainId, 16).toString();\n  }\n\n  /**\n   * Get current chain ID\n   */\n  get chainId(): string {\n    return this._chainId;\n  }\n\n  /**\n   * Get network version\n   */\n  get networkVersion(): string {\n    return this._networkVersion;\n  }\n\n  /**\n   * Get selected address (first account)\n   */\n  get selectedAddress(): string | null {\n    return this._accounts[0] || null;\n  }\n\n  /**\n   * Check if provider is connected\n   */\n  isConnected(): boolean {\n    return this._isConnected;\n  }\n\n  /**\n   * Make an RPC request\n   */\n  async request(args: ProviderRequest): Promise<unknown> {\n    logger.debug(`EIP-1193 request: ${args.method}`, { method: args.method, params: args.params });\n\n    try {\n      switch (args.method) {\n        case EthereumMethod.ETH_REQUEST_ACCOUNTS:\n          return this.handleRequestAccounts();\n\n        case EthereumMethod.ETH_ACCOUNTS:\n          return this.handleAccounts();\n\n        case EthereumMethod.ETH_CHAIN_ID:\n          return this.handleChainId();\n\n        case EthereumMethod.NET_VERSION:\n          return this.handleNetVersion();\n\n        case EthereumMethod.PERSONAL_SIGN:\n          return this.handlePersonalSign(args.params as [string, string]);\n\n        case EthereumMethod.ETH_SIGN_TYPED_DATA_V4:\n          return this.handleSignTypedDataV4(args.params as [string, object]);\n\n        case EthereumMethod.ETH_SEND_TRANSACTION:\n          return this.handleSendTransaction(args.params as [TransactionObject]);\n\n        case EthereumMethod.WALLET_SWITCH_ETHEREUM_CHAIN:\n          return this.handleSwitchChain(args.params as [SwitchEthereumChainParameter]);\n\n        case EthereumMethod.WALLET_ADD_ETHEREUM_CHAIN:\n          return this.handleAddChain(args.params as [AddEthereumChainParameter]);\n\n        case EthereumMethod.WALLET_WATCH_ASSET:\n          return this.handleWatchAsset(args.params as [WatchAssetParameter]);\n\n        case EthereumMethod.WALLET_REQUEST_PERMISSIONS:\n        case EthereumMethod.WALLET_GET_PERMISSIONS:\n          return this.handlePermissions(args.method);\n\n        default:\n          throw this.createError(\n            ProviderErrorCode.UNSUPPORTED_METHOD,\n            `Method ${args.method} is not supported`,\n            { method: args.method }\n          );\n      }\n    } catch (error) {\n      logger.error(`EIP-1193 request failed: ${args.method}`, error);\n      throw error;\n    }\n  }\n\n  /**\n   * Add event listener\n   */\n  on<T extends keyof ProviderEvents>(event: T, listener: ProviderEvents[T]): void {\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = new Set();\n    }\n    this.eventListeners[event]!.add(listener);\n  }\n\n  /**\n   * Remove event listener\n   */\n  removeListener<T extends keyof ProviderEvents>(event: T, listener: ProviderEvents[T]): void {\n    const listeners = this.eventListeners[event];\n    if (listeners) {\n      listeners.delete(listener);\n    }\n  }\n\n  /**\n   * Remove all listeners for an event\n   */\n  removeAllListeners(event?: keyof ProviderEvents): void {\n    if (event) {\n      delete this.eventListeners[event];\n    } else {\n      this.eventListeners = {};\n    }\n  }\n\n  /**\n   * Remove event listener (alias for removeListener)\n   */\n  off<T extends keyof ProviderEvents>(event: T, listener: ProviderEvents[T]): void {\n    this.removeListener(event, listener);\n  }\n\n  /**\n   * Add one-time event listener\n   */\n  once<T extends keyof ProviderEvents>(event: T, listener: ProviderEvents[T]): void {\n    const onceWrapper = (...args: Parameters<ProviderEvents[T]>) => {\n      this.removeListener(event, onceWrapper as ProviderEvents[T]);\n      (listener as any)(...args);\n    };\n    this.on(event, onceWrapper as ProviderEvents[T]);\n  }\n\n  /**\n   * Emit an event\n   */\n  emit<T extends keyof ProviderEvents>(event: T, ...args: Parameters<ProviderEvents[T]>): void {\n    const listeners = this.eventListeners[event];\n    if (listeners) {\n      listeners.forEach(listener => {\n        try {\n          (listener as any)(...args);\n        } catch (error) {\n          logger.error(`Error in event listener for ${event}:`, error);\n        }\n      });\n    }\n  }\n\n  // Provider management methods\n\n  /**\n   * Set accounts and emit accountsChanged event\n   */\n  setAccounts(accounts: string[]): void {\n    const oldAccounts = [...this._accounts];\n    this._accounts = accounts;\n\n    if (JSON.stringify(oldAccounts) !== JSON.stringify(accounts)) {\n      logger.info('Accounts changed', { from: oldAccounts, to: accounts });\n      this.emit('accountsChanged', accounts);\n    }\n  }\n\n  /**\n   * Set chain ID and emit chainChanged event\n   */\n  setChainId(chainId: string): void {\n    const oldChainId = this._chainId;\n    this._chainId = chainId;\n    this._networkVersion = parseInt(chainId, 16).toString();\n\n    if (oldChainId !== chainId) {\n      logger.info('Chain changed', { from: oldChainId, to: chainId });\n      this.emit('chainChanged', chainId);\n    }\n  }\n\n  /**\n   * Connect the provider\n   */\n  connect(): void {\n    if (!this._isConnected) {\n      this._isConnected = true;\n      logger.info('Provider connected', { chainId: this._chainId });\n      this.emit('connect', { chainId: this._chainId });\n    }\n  }\n\n  /**\n   * Disconnect the provider\n   */\n  disconnect(error?: ProviderRpcError): void {\n    if (this._isConnected) {\n      this._isConnected = false;\n      const disconnectError = error || this.createError(\n        ProviderErrorCode.DISCONNECTED,\n        'Provider disconnected'\n      );\n      logger.info('Provider disconnected', { error: disconnectError.message });\n      this.emit('disconnect', disconnectError);\n    }\n  }\n\n  // Request handlers\n\n  private async handleRequestAccounts(): Promise<string[]> {\n    if (!this._isConnected) {\n      this.connect();\n    }\n    return this._accounts;\n  }\n\n  private async handleAccounts(): Promise<string[]> {\n    return this._accounts;\n  }\n\n  private async handleChainId(): Promise<string> {\n    return this._chainId;\n  }\n\n  private async handleNetVersion(): Promise<string> {\n    return this._networkVersion;\n  }\n\n  private async handlePersonalSign([message, address]: [string, string]): Promise<string> {\n    logger.debug('Personal sign request', { message, address });\n\n    if (!this._accounts.includes(address)) {\n      throw this.createError(\n        ProviderErrorCode.UNAUTHORIZED,\n        `Address ${address} not found in wallet`,\n        { address }\n      );\n    }\n\n    // Mock signature - in real implementation, this would use the private key\n    const mockSignature = '0x' + '0'.repeat(130); // 65 bytes = 130 hex chars\n\n    logger.info('Message signed', { address, message });\n    return mockSignature;\n  }\n\n  private async handleSignTypedDataV4([address, typedData]: [string, object]): Promise<string> {\n    logger.debug('Sign typed data v4 request', { address, typedData });\n\n    if (!this._accounts.includes(address)) {\n      throw this.createError(\n        ProviderErrorCode.UNAUTHORIZED,\n        `Address ${address} not found in wallet`,\n        { address }\n      );\n    }\n\n    // Mock signature - in real implementation, this would use the private key\n    const mockSignature = '0x' + '1'.repeat(130); // Different from personal_sign\n\n    logger.info('Typed data signed', { address });\n    return mockSignature;\n  }\n\n  private async handleSendTransaction([tx]: [TransactionObject]): Promise<string> {\n    logger.debug('Send transaction request', { transaction: tx });\n\n    if (!this._accounts.includes(tx.from)) {\n      throw this.createError(\n        ProviderErrorCode.UNAUTHORIZED,\n        `From address ${tx.from} not found in wallet`,\n        { from: tx.from }\n      );\n    }\n\n    // Mock transaction hash\n    const mockTxHash = '0x' + Math.random().toString(16).substr(2, 64).padStart(64, '0');\n\n    logger.info('Transaction sent', { hash: mockTxHash, from: tx.from, to: tx.to });\n    return mockTxHash;\n  }\n\n  private async handleSwitchChain([{ chainId }]: [SwitchEthereumChainParameter]): Promise<null> {\n    logger.debug('Switch chain request', { chainId });\n\n    // Simulate chain switch\n    this.setChainId(chainId);\n\n    logger.info('Chain switched', { chainId });\n    return null;\n  }\n\n  private async handleAddChain([chainConfig]: [AddEthereumChainParameter]): Promise<null> {\n    logger.debug('Add chain request', { chainConfig });\n\n    // Mock adding chain - in real implementation, this would validate and store the chain\n    logger.info('Chain added', { chainId: chainConfig.chainId, name: chainConfig.chainName });\n    return null;\n  }\n\n  private async handleWatchAsset([asset]: [WatchAssetParameter]): Promise<boolean> {\n    logger.debug('Watch asset request', { asset });\n\n    // Mock watching asset - always return true for success\n    logger.info('Asset watched', { address: asset.options.address, symbol: asset.options.symbol });\n    return true;\n  }\n\n  private async handlePermissions(method: string): Promise<PermissionObject[]> {\n    logger.debug('Permissions request', { method });\n\n    // Mock permissions\n    const permissions: PermissionObject[] = [\n      {\n        invoker: window.location.origin,\n        parentCapability: 'eth_accounts',\n        id: Math.random().toString(36),\n        date: Date.now()\n      }\n    ];\n\n    return permissions;\n  }\n\n  /**\n   * Create a properly formatted provider error\n   */\n  private createError(code: ProviderErrorCode, message: string, data?: unknown): ProviderRpcError {\n    const error = new Error(message) as ProviderRpcError;\n    error.code = code;\n    error.data = data;\n    return error;\n  }\n}","import { logger } from '@arenaentertainment/wallet-mock-shared';\nimport type {\n  EIP6963ProviderInfo,\n  EIP6963ProviderDetail,\n  EIP6963AnnounceProviderEvent,\n  EIP6963RequestProviderEvent,\n  WalletAnnouncerConfig\n} from './types.js';\nimport type { EthereumProvider } from '../eip1193/types.js';\n\n/**\n * EIP-6963 Wallet Announcer\n * Handles wallet discovery according to EIP-6963 standard\n */\nexport class EIP6963WalletAnnouncer {\n  private config: WalletAnnouncerConfig;\n  private eventTarget: EventTarget;\n  private isAnnouncing = false;\n\n  constructor(config: WalletAnnouncerConfig) {\n    this.config = config;\n    this.eventTarget = config.eventTarget || (typeof window !== 'undefined' ? window : global);\n\n    if (config.autoRespond !== false) {\n      this.startListening();\n    }\n  }\n\n  /**\n   * Start listening for provider requests\n   */\n  startListening(): void {\n    if (this.isAnnouncing) return;\n\n    this.isAnnouncing = true;\n    this.eventTarget.addEventListener(\n      'eip6963:requestProvider',\n      this.handleProviderRequest.bind(this) as EventListener\n    );\n\n    // Announce immediately when starting\n    this.announce();\n\n    logger.info('EIP-6963 wallet announcer started', {\n      name: this.config.info.name,\n      uuid: this.config.info.uuid\n    });\n  }\n\n  /**\n   * Stop listening for provider requests\n   */\n  stopListening(): void {\n    if (!this.isAnnouncing) return;\n\n    this.isAnnouncing = false;\n    this.eventTarget.removeEventListener(\n      'eip6963:requestProvider',\n      this.handleProviderRequest.bind(this) as EventListener\n    );\n\n    logger.info('EIP-6963 wallet announcer stopped', {\n      name: this.config.info.name\n    });\n  }\n\n  /**\n   * Announce the wallet provider\n   */\n  announce(): void {\n    const detail: EIP6963ProviderDetail = {\n      info: { ...this.config.info },\n      provider: this.config.provider\n    };\n\n    const announceEvent = new CustomEvent('eip6963:announceProvider', {\n      detail\n    }) as EIP6963AnnounceProviderEvent;\n\n    this.eventTarget.dispatchEvent(announceEvent);\n\n    logger.debug('EIP-6963 wallet announced', {\n      name: this.config.info.name,\n      uuid: this.config.info.uuid\n    });\n  }\n\n  /**\n   * Update provider info\n   */\n  updateInfo(info: Partial<EIP6963ProviderInfo>): void {\n    this.config.info = { ...this.config.info, ...info };\n\n    if (this.isAnnouncing) {\n      this.announce();\n    }\n\n    logger.info('EIP-6963 provider info updated', { info: this.config.info });\n  }\n\n  /**\n   * Update the provider instance\n   */\n  updateProvider(provider: EthereumProvider): void {\n    this.config.provider = provider;\n\n    if (this.isAnnouncing) {\n      this.announce();\n    }\n\n    logger.info('EIP-6963 provider instance updated');\n  }\n\n  /**\n   * Get current provider detail\n   */\n  getProviderDetail(): EIP6963ProviderDetail {\n    return {\n      info: { ...this.config.info },\n      provider: this.config.provider\n    };\n  }\n\n  /**\n   * Handle provider request events\n   */\n  private handleProviderRequest(event: EIP6963RequestProviderEvent): void {\n    logger.debug('EIP-6963 provider request received');\n    this.announce();\n  }\n\n  /**\n   * Cleanup resources\n   */\n  destroy(): void {\n    this.stopListening();\n    logger.info('EIP-6963 wallet announcer destroyed');\n  }\n}\n\n/**\n * Utility function to create a standard wallet announcer\n */\nexport function createWalletAnnouncer(\n  info: EIP6963ProviderInfo,\n  provider: EthereumProvider,\n  options: Partial<WalletAnnouncerConfig> = {}\n): EIP6963WalletAnnouncer {\n  return new EIP6963WalletAnnouncer({\n    info,\n    provider,\n    autoRespond: true,\n    ...options\n  });\n}\n\n/**\n * Utility function to generate a UUID for wallet identification\n */\nexport function generateWalletUUID(): string {\n  // Simple UUID v4 implementation\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    const r = Math.random() * 16 | 0;\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\n/**\n * Predefined wallet info templates\n */\nexport const WalletInfoTemplates = {\n  mockWallet: (uuid?: string): EIP6963ProviderInfo => ({\n    uuid: uuid || generateWalletUUID(),\n    name: 'Mock Wallet',\n    icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzAwN0FGRiIvPgo8cGF0aCBkPSJNOCAxMkgyNFYyMEg4VjEyWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg==',\n    rdns: 'com.arenaentertainment.wallet-mock'\n  }),\n\n  metamaskMock: (uuid?: string): EIP6963ProviderInfo => ({\n    uuid: uuid || generateWalletUUID(),\n    name: 'MetaMask Mock',\n    icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiNGNjY1MkEiLz4KPHBhdGggZD0iTTggMTJIMjRWMjBIOFYxMloiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=',\n    rdns: 'io.metamask.mock'\n  })\n};","import { logger } from '@arenaentertainment/wallet-mock-shared';\nimport type {\n  EIP6963ProviderDetail,\n  EIP6963AnnounceProviderEvent,\n  EIP6963RequestProviderEvent\n} from './types.js';\n\n/**\n * EIP-6963 Wallet Discovery Client\n * Discovers available wallets according to EIP-6963 standard\n */\nexport class EIP6963WalletDiscovery {\n  private eventTarget: EventTarget;\n  private discoveredWallets: Map<string, EIP6963ProviderDetail> = new Map();\n  private isListening = false;\n  private listeners: Set<(wallets: EIP6963ProviderDetail[]) => void> = new Set();\n\n  constructor(eventTarget?: EventTarget) {\n    this.eventTarget = eventTarget || (typeof window !== 'undefined' ? window : global);\n  }\n\n  /**\n   * Start discovering wallets\n   */\n  startDiscovery(): void {\n    if (this.isListening) return;\n\n    this.isListening = true;\n\n    // Listen for wallet announcements\n    this.eventTarget.addEventListener(\n      'eip6963:announceProvider',\n      this.handleWalletAnnouncement.bind(this) as EventListener\n    );\n\n    // Request all available wallets\n    this.requestProviders();\n\n    logger.info('EIP-6963 wallet discovery started');\n  }\n\n  /**\n   * Stop discovering wallets\n   */\n  stopDiscovery(): void {\n    if (!this.isListening) return;\n\n    this.isListening = false;\n\n    this.eventTarget.removeEventListener(\n      'eip6963:announceProvider',\n      this.handleWalletAnnouncement.bind(this) as EventListener\n    );\n\n    logger.info('EIP-6963 wallet discovery stopped');\n  }\n\n  /**\n   * Request providers to announce themselves\n   */\n  requestProviders(): void {\n    const requestEvent = new Event('eip6963:requestProvider') as EIP6963RequestProviderEvent;\n    this.eventTarget.dispatchEvent(requestEvent);\n\n    logger.debug('EIP-6963 provider request dispatched');\n  }\n\n  /**\n   * Get all discovered wallets\n   */\n  getDiscoveredWallets(): EIP6963ProviderDetail[] {\n    return Array.from(this.discoveredWallets.values());\n  }\n\n  /**\n   * Get a specific wallet by UUID\n   */\n  getWallet(uuid: string): EIP6963ProviderDetail | undefined {\n    return this.discoveredWallets.get(uuid);\n  }\n\n  /**\n   * Get a wallet by name\n   */\n  getWalletByName(name: string): EIP6963ProviderDetail | undefined {\n    for (const wallet of this.discoveredWallets.values()) {\n      if (wallet.info.name === name) {\n        return wallet;\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Get a wallet by RDNS\n   */\n  getWalletByRDNS(rdns: string): EIP6963ProviderDetail | undefined {\n    for (const wallet of this.discoveredWallets.values()) {\n      if (wallet.info.rdns === rdns) {\n        return wallet;\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Add a listener for wallet discoveries\n   */\n  onWalletsChanged(listener: (wallets: EIP6963ProviderDetail[]) => void): void {\n    this.listeners.add(listener);\n  }\n\n  /**\n   * Remove a wallet discovery listener\n   */\n  removeWalletsListener(listener: (wallets: EIP6963ProviderDetail[]) => void): void {\n    this.listeners.delete(listener);\n  }\n\n  /**\n   * Clear all discovered wallets\n   */\n  clearWallets(): void {\n    this.discoveredWallets.clear();\n    this.notifyListeners();\n    logger.info('Discovered wallets cleared');\n  }\n\n  /**\n   * Handle wallet announcement events\n   */\n  private handleWalletAnnouncement(event: EIP6963AnnounceProviderEvent): void {\n    const { detail } = event;\n    const { info } = detail;\n\n    logger.debug('Wallet announced', {\n      name: info.name,\n      uuid: info.uuid,\n      rdns: info.rdns\n    });\n\n    // Store or update the wallet\n    const existingWallet = this.discoveredWallets.get(info.uuid);\n\n    if (!existingWallet || JSON.stringify(existingWallet.info) !== JSON.stringify(info)) {\n      this.discoveredWallets.set(info.uuid, detail);\n      this.notifyListeners();\n\n      logger.info('Wallet discovered', {\n        name: info.name,\n        uuid: info.uuid,\n        isUpdate: !!existingWallet\n      });\n    }\n  }\n\n  /**\n   * Notify all listeners of wallet changes\n   */\n  private notifyListeners(): void {\n    const wallets = this.getDiscoveredWallets();\n    this.listeners.forEach(listener => {\n      try {\n        listener(wallets);\n      } catch (error) {\n        logger.error('Error in wallet discovery listener:', error);\n      }\n    });\n  }\n\n  /**\n   * Cleanup resources\n   */\n  destroy(): void {\n    this.stopDiscovery();\n    this.clearWallets();\n    this.listeners.clear();\n    logger.info('EIP-6963 wallet discovery destroyed');\n  }\n}\n\n/**\n * Utility function to discover wallets with a timeout\n */\nexport async function discoverWallets(\n  timeout: number = 1000,\n  eventTarget?: EventTarget\n): Promise<EIP6963ProviderDetail[]> {\n  const discovery = new EIP6963WalletDiscovery(eventTarget);\n\n  return new Promise((resolve) => {\n    let timeoutId: NodeJS.Timeout;\n\n    const cleanup = () => {\n      discovery.destroy();\n      if (timeoutId) clearTimeout(timeoutId);\n    };\n\n    // Start discovery\n    discovery.startDiscovery();\n\n    // Set timeout to resolve\n    timeoutId = setTimeout(() => {\n      const wallets = discovery.getDiscoveredWallets();\n      cleanup();\n      resolve(wallets);\n    }, timeout);\n\n    // Also resolve immediately if we find wallets quickly\n    discovery.onWalletsChanged((wallets) => {\n      if (wallets.length > 0) {\n        cleanup();\n        resolve(wallets);\n      }\n    });\n  });\n}\n\n/**\n * Utility function to find a specific wallet by name\n */\nexport async function findWallet(\n  name: string,\n  timeout: number = 1000,\n  eventTarget?: EventTarget\n): Promise<EIP6963ProviderDetail | null> {\n  const wallets = await discoverWallets(timeout, eventTarget);\n  return wallets.find(wallet => wallet.info.name === name) || null;\n}","/**\n * Solana Wallet Standard Types\n * Based on https://github.com/wallet-standard/wallet-standard\n */\n\n/**\n * Wallet account interface\n */\nexport interface WalletAccount {\n  /** Base58-encoded public key */\n  publicKey: string;\n  /** Optional account label */\n  label?: string;\n  /** Optional account icon */\n  icon?: string;\n  /** Supported chains for this account */\n  chains: string[];\n  /** Supported features for this account */\n  features: string[];\n}\n\n/**\n * Wallet properties\n */\nexport interface WalletProperties {\n  /** Wallet name */\n  name: string;\n  /** Wallet icon URL or data URI */\n  icon: string;\n  /** Wallet version */\n  version: string;\n  /** Supported chains */\n  chains: string[];\n  /** Supported features */\n  features: Record<string, unknown>;\n}\n\n/**\n * Base feature interface\n */\nexport interface WalletFeature {\n  /** Feature name */\n  readonly name: string;\n}\n\n/**\n * Standard connect feature\n */\nexport interface SolanaConnect extends WalletFeature {\n  readonly name: 'standard:connect';\n  connect(properties?: { onlyIfTrusted?: boolean }): Promise<{ accounts: WalletAccount[] }>;\n}\n\n/**\n * Standard disconnect feature\n */\nexport interface SolanaDisconnect extends WalletFeature {\n  readonly name: 'standard:disconnect';\n  disconnect(): Promise<void>;\n}\n\n/**\n * Standard events feature\n */\nexport interface SolanaEvents extends WalletFeature {\n  readonly name: 'standard:events';\n  on<T extends keyof SolanaWalletEvents>(\n    event: T,\n    listener: SolanaWalletEvents[T],\n    options?: { once?: boolean }\n  ): () => void;\n}\n\n/**\n * Solana sign transaction feature\n */\nexport interface SolanaSignTransaction extends WalletFeature {\n  readonly name: 'solana:signTransaction';\n  signTransaction<T extends SolanaTransaction>(\n    inputs: Array<{\n      account: WalletAccount;\n      transaction: T;\n      chain?: string;\n    }>\n  ): Promise<Array<{ signedTransaction: T }>>;\n}\n\n/**\n * Solana sign message feature\n */\nexport interface SolanaSignMessage extends WalletFeature {\n  readonly name: 'solana:signMessage';\n  signMessage(\n    inputs: Array<{\n      account: WalletAccount;\n      message: Uint8Array;\n    }>\n  ): Promise<Array<{ signature: Uint8Array }>>;\n}\n\n/**\n * Solana sign and send transaction feature\n */\nexport interface SolanaSignAndSendTransaction extends WalletFeature {\n  readonly name: 'solana:signAndSendTransaction';\n  signAndSendTransaction<T extends SolanaTransaction>(\n    inputs: Array<{\n      account: WalletAccount;\n      transaction: T;\n      chain?: string;\n      options?: {\n        skipPreflight?: boolean;\n        preflightCommitment?: string;\n        maxRetries?: number;\n      };\n    }>\n  ): Promise<Array<{ signature: string }>>;\n}\n\n/**\n * Wallet standard events\n */\nexport interface SolanaWalletEvents {\n  /** Account change event */\n  change: (properties: { accounts: WalletAccount[] }) => void;\n  /** Index signature for compatibility */\n  [key: string]: (...args: any[]) => void;\n}\n\n/**\n * Solana transaction interface (minimal)\n */\nexport interface SolanaTransaction {\n  /** Serialized transaction */\n  serialize(): Uint8Array;\n  /** Add signature to transaction */\n  addSignature(publicKey: string, signature: Uint8Array): void;\n}\n\n/**\n * Mock Solana transaction for testing\n */\nexport class MockSolanaTransaction implements SolanaTransaction {\n  private signatures: Map<string, Uint8Array> = new Map();\n\n  constructor(private data: Uint8Array = new Uint8Array(0)) {}\n\n  serialize(): Uint8Array {\n    return this.data;\n  }\n\n  addSignature(publicKey: string, signature: Uint8Array): void {\n    this.signatures.set(publicKey, signature);\n  }\n\n  getSignature(publicKey: string): Uint8Array | undefined {\n    return this.signatures.get(publicKey);\n  }\n}\n\n/**\n * Complete Solana wallet interface combining all features\n */\nexport interface SolanaWallet {\n  /** Wallet properties */\n  readonly properties: WalletProperties;\n  /** Wallet accounts */\n  readonly accounts: readonly WalletAccount[];\n  /** Available features */\n  readonly features: {\n    'standard:connect': SolanaConnect;\n    'standard:disconnect': SolanaDisconnect;\n    'standard:events': SolanaEvents;\n    'solana:signTransaction': SolanaSignTransaction;\n    'solana:signMessage': SolanaSignMessage;\n    'solana:signAndSendTransaction'?: SolanaSignAndSendTransaction;\n  };\n}\n\n/**\n * Solana chains\n */\nexport const SolanaChains = {\n  MAINNET: 'solana:mainnet',\n  TESTNET: 'solana:testnet',\n  DEVNET: 'solana:devnet',\n  LOCALNET: 'solana:localnet'\n} as const;\n\nexport type SolanaChain = typeof SolanaChains[keyof typeof SolanaChains];\n\n/**\n * Feature names\n */\nexport const FeatureNames = {\n  STANDARD_CONNECT: 'standard:connect',\n  STANDARD_DISCONNECT: 'standard:disconnect',\n  STANDARD_EVENTS: 'standard:events',\n  SOLANA_SIGN_TRANSACTION: 'solana:signTransaction',\n  SOLANA_SIGN_MESSAGE: 'solana:signMessage',\n  SOLANA_SIGN_AND_SEND_TRANSACTION: 'solana:signAndSendTransaction'\n} as const;","import { EventEmitter } from '@arenaentertainment/wallet-mock-shared';\nimport { logger } from '@arenaentertainment/wallet-mock-shared';\nimport type {\n  WalletAccount,\n  WalletProperties,\n  SolanaConnect,\n  SolanaDisconnect,\n  SolanaEvents,\n  SolanaSignTransaction,\n  SolanaSignMessage,\n  SolanaSignAndSendTransaction,\n  SolanaWallet,\n  SolanaWalletEvents,\n  SolanaTransaction,\n  SolanaChain\n} from './types.js';\nimport { SolanaChains, FeatureNames, MockSolanaTransaction } from './types.js';\n\n/**\n * Mock implementation of Solana Wallet Standard\n */\nexport class MockSolanaWallet implements SolanaWallet, EventEmitter<SolanaWalletEvents> {\n  private _accounts: WalletAccount[] = [];\n  private _isConnected = false;\n  private eventListeners: Partial<Record<keyof SolanaWalletEvents, Set<Function>>> = {};\n\n  private readonly _properties: WalletProperties;\n  private readonly _features: SolanaWallet['features'];\n\n  constructor(config: {\n    name?: string;\n    icon?: string;\n    version?: string;\n    chains?: SolanaChain[];\n  } = {}) {\n    this._properties = {\n      name: config.name || 'Mock Solana Wallet',\n      icon: config.icon || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiM5OTQ1RkYiLz4KPHBhdGggZD0iTTggMTJIMjRWMjBIOFYxMloiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=',\n      version: config.version || '1.0.0',\n      chains: config.chains || [SolanaChains.DEVNET],\n      features: {\n        [FeatureNames.STANDARD_CONNECT]: this.createConnectFeature(),\n        [FeatureNames.STANDARD_DISCONNECT]: this.createDisconnectFeature(),\n        [FeatureNames.STANDARD_EVENTS]: this.createEventsFeature(),\n        [FeatureNames.SOLANA_SIGN_TRANSACTION]: this.createSignTransactionFeature(),\n        [FeatureNames.SOLANA_SIGN_MESSAGE]: this.createSignMessageFeature(),\n        [FeatureNames.SOLANA_SIGN_AND_SEND_TRANSACTION]: this.createSignAndSendTransactionFeature()\n      }\n    };\n\n    this._features = {\n      'standard:connect': this.createConnectFeature(),\n      'standard:disconnect': this.createDisconnectFeature(),\n      'standard:events': this.createEventsFeature(),\n      'solana:signTransaction': this.createSignTransactionFeature(),\n      'solana:signMessage': this.createSignMessageFeature(),\n      'solana:signAndSendTransaction': this.createSignAndSendTransactionFeature()\n    };\n  }\n\n  get properties(): WalletProperties {\n    return { ...this._properties };\n  }\n\n  get accounts(): readonly WalletAccount[] {\n    return [...this._accounts];\n  }\n\n  get features(): SolanaWallet['features'] {\n    return this._features;\n  }\n\n  // Event emitter implementation\n  on<T extends keyof SolanaWalletEvents>(event: T, listener: SolanaWalletEvents[T]): void {\n    if (!this.eventListeners[event]) {\n      this.eventListeners[event] = new Set();\n    }\n    this.eventListeners[event]!.add(listener);\n  }\n\n  off<T extends keyof SolanaWalletEvents>(event: T, listener: SolanaWalletEvents[T]): void {\n    const listeners = this.eventListeners[event];\n    if (listeners) {\n      listeners.delete(listener);\n    }\n  }\n\n  once<T extends keyof SolanaWalletEvents>(event: T, listener: SolanaWalletEvents[T]): void {\n    const onceWrapper = (...args: Parameters<SolanaWalletEvents[T]>) => {\n      this.off(event, onceWrapper as SolanaWalletEvents[T]);\n      (listener as any)(...args);\n    };\n    this.on(event, onceWrapper as SolanaWalletEvents[T]);\n  }\n\n  emit<T extends keyof SolanaWalletEvents>(event: T, ...args: Parameters<SolanaWalletEvents[T]>): void {\n    const listeners = this.eventListeners[event];\n    if (listeners) {\n      listeners.forEach(listener => {\n        try {\n          (listener as any)(...args);\n        } catch (error) {\n          logger.error(`Error in Solana wallet event listener for ${event}:`, error);\n        }\n      });\n    }\n  }\n\n  removeAllListeners<T extends keyof SolanaWalletEvents>(event?: T): void {\n    if (event) {\n      delete this.eventListeners[event];\n    } else {\n      this.eventListeners = {};\n    }\n  }\n\n  // Wallet management methods\n  setAccounts(accounts: WalletAccount[]): void {\n    const oldAccounts = [...this._accounts];\n    this._accounts = accounts;\n\n    if (JSON.stringify(oldAccounts) !== JSON.stringify(accounts)) {\n      logger.info('Solana accounts changed', { from: oldAccounts.length, to: accounts.length });\n      this.emit('change', { accounts });\n    }\n  }\n\n  addAccount(account: WalletAccount): void {\n    if (!this._accounts.find(acc => acc.publicKey === account.publicKey)) {\n      this._accounts.push(account);\n      this.emit('change', { accounts: [...this.accounts] });\n      logger.info('Solana account added', { publicKey: account.publicKey });\n    }\n  }\n\n  removeAccount(publicKey: string): void {\n    const index = this._accounts.findIndex(acc => acc.publicKey === publicKey);\n    if (index !== -1) {\n      this._accounts.splice(index, 1);\n      this.emit('change', { accounts: [...this.accounts] });\n      logger.info('Solana account removed', { publicKey });\n    }\n  }\n\n  // Feature implementations\n  private createConnectFeature(): SolanaConnect {\n    return {\n      name: 'standard:connect',\n      connect: async (properties?: { onlyIfTrusted?: boolean }) => {\n        logger.debug('Solana connect requested', { onlyIfTrusted: properties?.onlyIfTrusted });\n\n        if (properties?.onlyIfTrusted && !this._isConnected) {\n          throw new Error('Wallet not trusted, cannot auto-connect');\n        }\n\n        // Simulate connection\n        this._isConnected = true;\n\n        // If no accounts, create a mock one\n        if (this._accounts.length === 0) {\n          const mockAccount: WalletAccount = {\n            publicKey: this.generateMockPublicKey(),\n            label: 'Account 1',\n            chains: [SolanaChains.DEVNET],\n            features: [\n              FeatureNames.SOLANA_SIGN_TRANSACTION,\n              FeatureNames.SOLANA_SIGN_MESSAGE\n            ]\n          };\n          this._accounts.push(mockAccount);\n        }\n\n        logger.info('Solana wallet connected', { accountCount: this._accounts.length });\n        return { accounts: [...this._accounts] };\n      }\n    };\n  }\n\n  private createDisconnectFeature(): SolanaDisconnect {\n    return {\n      name: 'standard:disconnect',\n      disconnect: async () => {\n        logger.debug('Solana disconnect requested');\n\n        this._isConnected = false;\n        this._accounts = [];\n\n        this.emit('change', { accounts: [] });\n        logger.info('Solana wallet disconnected');\n      }\n    };\n  }\n\n  private createEventsFeature(): SolanaEvents {\n    return {\n      name: 'standard:events',\n      on: <T extends keyof SolanaWalletEvents>(\n        event: T,\n        listener: SolanaWalletEvents[T],\n        options?: { once?: boolean }\n      ) => {\n        if (options?.once) {\n          this.once(event, listener);\n        } else {\n          this.on(event, listener);\n        }\n\n        return () => this.off(event, listener);\n      }\n    };\n  }\n\n  private createSignTransactionFeature(): SolanaSignTransaction {\n    return {\n      name: 'solana:signTransaction',\n      signTransaction: async <T extends SolanaTransaction>(\n        inputs: Array<{\n          account: WalletAccount;\n          transaction: T;\n          chain?: string;\n        }>\n      ) => {\n        logger.debug('Solana sign transaction requested', { inputCount: inputs.length });\n\n        const results = await Promise.all(\n          inputs.map(async ({ account, transaction, chain }) => {\n            // Verify account exists\n            if (!this._accounts.find(acc => acc.publicKey === account.publicKey)) {\n              throw new Error(`Account ${account.publicKey} not found`);\n            }\n\n            // Mock signature - 64 bytes\n            const mockSignature = new Uint8Array(64);\n            for (let i = 0; i < 64; i++) {\n              mockSignature[i] = Math.floor(Math.random() * 256);\n            }\n\n            // Add signature to transaction if it's our mock type\n            if (transaction instanceof MockSolanaTransaction) {\n              transaction.addSignature(account.publicKey, mockSignature);\n            }\n\n            logger.info('Solana transaction signed', {\n              account: account.publicKey,\n              chain: chain || 'default'\n            });\n\n            return { signedTransaction: transaction };\n          })\n        );\n\n        return results;\n      }\n    };\n  }\n\n  private createSignMessageFeature(): SolanaSignMessage {\n    return {\n      name: 'solana:signMessage',\n      signMessage: async (\n        inputs: Array<{\n          account: WalletAccount;\n          message: Uint8Array;\n        }>\n      ) => {\n        logger.debug('Solana sign message requested', { inputCount: inputs.length });\n\n        const results = await Promise.all(\n          inputs.map(async ({ account, message }) => {\n            // Verify account exists\n            if (!this._accounts.find(acc => acc.publicKey === account.publicKey)) {\n              throw new Error(`Account ${account.publicKey} not found`);\n            }\n\n            // Mock signature - 64 bytes\n            const signature = new Uint8Array(64);\n            for (let i = 0; i < 64; i++) {\n              signature[i] = Math.floor(Math.random() * 256);\n            }\n\n            logger.info('Solana message signed', {\n              account: account.publicKey,\n              messageLength: message.length\n            });\n\n            return { signature };\n          })\n        );\n\n        return results;\n      }\n    };\n  }\n\n  private createSignAndSendTransactionFeature(): SolanaSignAndSendTransaction {\n    return {\n      name: 'solana:signAndSendTransaction',\n      signAndSendTransaction: async <T extends SolanaTransaction>(\n        inputs: Array<{\n          account: WalletAccount;\n          transaction: T;\n          chain?: string;\n          options?: {\n            skipPreflight?: boolean;\n            preflightCommitment?: string;\n            maxRetries?: number;\n          };\n        }>\n      ) => {\n        logger.debug('Solana sign and send transaction requested', { inputCount: inputs.length });\n\n        const results = await Promise.all(\n          inputs.map(async ({ account, transaction, chain, options }) => {\n            // Verify account exists\n            if (!this._accounts.find(acc => acc.publicKey === account.publicKey)) {\n              throw new Error(`Account ${account.publicKey} not found`);\n            }\n\n            // Mock transaction signature (base58-like)\n            const signature = this.generateMockTransactionSignature();\n\n            logger.info('Solana transaction signed and sent', {\n              account: account.publicKey,\n              chain: chain || 'default',\n              signature,\n              options\n            });\n\n            return { signature };\n          })\n        );\n\n        return results;\n      }\n    };\n  }\n\n  // Utility methods\n  private generateMockPublicKey(): string {\n    // Generate a Base58-like string (44 characters)\n    const chars = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\n    let result = '';\n    for (let i = 0; i < 44; i++) {\n      result += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return result;\n  }\n\n  private generateMockTransactionSignature(): string {\n    // Generate a Base58-like transaction signature (88 characters)\n    const chars = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\n    let result = '';\n    for (let i = 0; i < 88; i++) {\n      result += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return result;\n  }\n\n  // Cleanup\n  destroy(): void {\n    this.removeAllListeners();\n    this._accounts = [];\n    this._isConnected = false;\n    logger.info('Solana wallet destroyed');\n  }\n}"],"names":["EthereumMethod","ProviderErrorCode"],"mappings":"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"}